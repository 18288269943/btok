\chapter{Общие положения}\label{COMMON}

\section{Назначение}

Настоящий стандарт определяет структуру и правила работы с КТ,
который может использоваться в различных информационных системах
для аутентификации и ЭЦП.

В обычном (локальном) режиме владелец взаимодействует с КТ, 
управляя паролями, генерируя ключи ЭЦП, подписывая данные.

В терминальном режиме КТ взаимодействует с терминалом, представляя владельца.
В этом режиме КТ решает следующие задачи: 
\begin{itemize}
\item[1)]
аутентификация владельца на доступ к ресурсам и сервисам токена; 
\item[2)]
управление объектами, размещенными в пределах криптографической границы токена;
\item[3)]
аутентификация терминала и аутентификация перед ним;
\item[4)]
установка защищенного соединения с терминалом;
\item[5)]
проверка полномочий терминала и передача ему ресурсов владельца;
\item[6)]
проверка полномочий терминала и открытие ему доступа к прикладным программам 
КТ. В частности, КТ может открывать доступ к программе eSign, разрешая
генерацию ключей, подпись запроса на получение сертификата, запись 
сертификата, подписывание данных.
\end{itemize}

%\doubt{Терминал, который решает последнюю задачу, называется терминалом подписи.}

\section{Реализация} 

КТ может быть выполнен в виде смарт-карты, USB-токена, программы, 
выполняемой на защищенном сервере. Программные токены могут быть полезны 
для организации криптографических сервисов серверов и служб. Определенный 
в разделе~\ref{CMDS} командный интерфейс унифицирует работу с токенами 
различных типов.  

Программное обеспечение КТ должно соответствовать требованиям СТБ~34.101.27 
или аналогичных ТНПА. На аппаратном КТ должны быть 
предусмотрены средства инженерной защиты от злоумышленника, завладевшего 
токеном. Эти средства должны препятствовать чтению критических данных 
(личных и секретных ключей, паролей, атрибутов владельца) и переводу КТ в 
необнаружимое небезопасное состояние.  

\section{Терминалы}

Терминалы могут быть двух типов: локальный и удаленный.

Локальный терминал взаимодействует с КТ непосредственно. КП является 
частью локального терминала. Локальный терминал должен быть выполнен
аппаратно.

Удаленный терминал взаимодействует с КТ через коммуникационные сети,
как правило, сети Интернет. Посредником при взаимодействии кроме 
КП может быть браузер. 

Удаленный терминал, как правило, представляет сервер или службу.
Например в СТБ 34.101.78 терминал представляет РЦ (для организации 
выпуска сертификатов) и СИ (для организации аутентификации). 

Для организации взаимодействия с КТ терминалы снабжаются сертификатами.
Сертификаты должны быть выпушены в ИОК, определенной в СТБ 34.101.78.

\section{Клиентская программа}

КП организует взаимодействие КТ с владельцем и терминалом.

КП может обрабатывать критические данные
(например, пароль), а также открытые данные, 
целостность и подлинность которых определяют надежность  
взаимодействия.

КП не может обеспечить полную защиту обрабатываемых данных. 
Защита организуется средствами среды эксплуатации, 
в том числе через настройки операционной системы.  
%
Основные задачи защиты: 
невозможность чтения критических областей памяти
вредоносными программами; 
невозможность перехвата данных, передаваемым по каналам управления; 
защита канала <<браузер~--- приложение>>; 
невозможность подмены открытых данных.
%
Организация защиты выходит за рамки настоящего стандарта.

При использовании аппаратного КТ единственными критическими данными, 
которые обрабатывает КП, является пароль доступа к КТ. Поэтому КТ 
желательно использовать в тех ситуациях, когда КП пользователя 
выполняется в потенциально агрессивной среде, например, 
на незащищенном компьютере общего пользования.

\section{Прикладные программы} 

На токене должны быть реализованы прикладные программы eID и eSign. Могут 
поддерживаться дополнительные  программы, например, 
программа ePassport~--- электронный паспорт. 

